<!DOCTYPE html>
<html lang="en">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Knowledge Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://unpkg.com/d3-cloud@1.2.5/build/d3.layout.cloud.js"></script>
</head>
<body>
    <div class="app-header">
        <span class="app-title-icon" style="font-size:2.1rem;vertical-align:middle; margin-left: 15px;">ðŸ§ </span> 
        <span class="app-title-text">SynthesisAI Collaborative Lab</span>
        <div class="app-menu-wrapper">
            <button id="app-menu-button" title="Open menu" style="background:none;border:none;cursor:pointer;font-size:1.5rem;vertical-align:middle;">
                â˜°
            </button>
            <div id="app-menu" class="app-menu-dropdown" style="display: none;">
                <div class="app-menu-item">
                    <span>Theme:</span>
                    <button id="dark-toggle" title="Toggle dark mode">
                        <span id="dark-icon">ðŸŒ™</span>
                    </button>
                    <input type="color" id="theme-color" title="Pick accent color" value="#6a82fb">
                </div>
                <div id="app-menu-sound-controls" class="app-menu-item">
                    <!-- Mute button will be added here by app.js -->
                </div>
                <button class="app-menu-item app-menu-button-style" id="add-annotations-btn">Load Annotations</button>
                <button class="app-menu-item app-menu-button-style" id="add-readings-btn">Load Readings</button>
            </div>
        </div>
    </div>
    <button id="summaryButton">Summary</button>
    <div class="container">
        <div class="left-column">
            <h2>Student Knowledge Visualization</h2>
            <div id="visualization-space">
                <div id="network-graph-container" class="visualization-container">
                    <svg id="network-graph"></svg>
                </div>
                <div id="word-cloud-container" class="visualization-container">
                    <svg id="word-cloud"></svg>
                </div>
            </div>
        </div>
        <div class="right-column">
            <h2>Collaborative Writing Space</h2>
            <textarea id="collaborative-writing" placeholder="Start writing collaboratively..."></textarea>
            <div class="widget ai-assistant-widget">
                <h3><i class="fas fa-robot"></i> AI Assistant</h3>
                <p>Ask the AI about your data or for insights.</p>
                
                <!-- Chat Messages Area -->
                <div id="ai-chat-window" class="chat-window-style"> 
                    <!-- Chat messages will be appended here by JavaScript -->
                </div>

                <!-- Input Area -->
                <div class="chat-input-area">
                    <textarea id="ai-query-input" placeholder="Type your question for the AI..." rows="2"></textarea>
                    <button id="ask-ai-btn" class="button-style">Ask AI</button>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <p>&copy; <span id="currentYear"></span> SynthesisAI. All rights reserved.</p>
        <button id="adminLogsBtn" class="button-style">Admin Logs</button>
    </footer>

    <!-- MODAL FOR ADMIN LOGS -->
    <div id="adminLogsModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeAdminModalBtn">&times;</span>
            <h2>Admin Logs</h2>
            <div id="adminLogsContent" class="modal-log-content">
                <h3>Clickstream Events:</h3>
                <pre id="clickstreamLogData"></pre>
                <h3>Visualization Data Events:</h3>
                <pre id="visualizationLogData"></pre>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <input type="file" id="csv-upload-input" accept=".csv" style="display: none;">
</body>
</html>
